---
description: "Configuration, secrets management, and environment appsettings"
globs:
  - ConfigModels/**/*.cs
  - appsettings*.json
  - Program.cs
alwaysApply: true
---

## 8. Configuration & Secrets

### Configuration Model

####  DO:
- Extend `AppConfigs` class in `ConfigModels/AppConfigs.cs` for new configuration items
- Access configuration via `IOptions<AppConfigs>` injection
- Store all MRI URLs, SOAP action URLs, credentials, and IDs in `appsettings.*.json` files
- Use `AppVariables` section for application-specific settings

####  DON'T:
- Hard-code URLs, credentials, contract IDs, or environment-specific values
- Access configuration via `IConfiguration` directly when `AppConfigs` model exists
- Store secrets in code or configuration files committed to repository

### Environment-Specific Configuration

####  DO:
- Add environment-specific values in `appsettings.<environment>.json` files:
  - `appsettings.dev.json`
  - `appsettings.qa.json`
  - `appsettings.stg.json`
  - `appsettings.prod.json`
  - `appsettings.dr.json`
- Respect the environment detection logic in `Program.cs`:
```csharp
var environment = Environment.GetEnvironmentVariable("ENVIRONMENT")
               ?? Environment.GetEnvironmentVariable("ASPNETCORE_ENVIRONMENT")
               ?? "dev";
```

####  DON'T:
- Create new environment detection mechanisms
- Mix environment-specific logic in code (use configuration files)
- Commit production secrets to repository

---

