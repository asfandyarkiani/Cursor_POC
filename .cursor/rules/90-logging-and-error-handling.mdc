---
description: "Logging standards and exception handling"
globs:
  - **/*.cs
alwaysApply: true
---

## 9. Logging & Error Handling

### Logging Patterns

####  DO:
- Use extension-style logging methods:
  - `_logger.Info("message")`
  - `_logger.Error(exception, "message")`
  - `_logger.Warn("message")`
- Log key lifecycle events:
  - Request received
  - Validation failures
  - Downstream API calls (start/end)
  - Success/failure states
  - Session management events
- Include relevant context in log messages (SRN, SessionId, etc.)

####  DON'T:
- Use `Console.WriteLine` or direct console output
- Log sensitive information (passwords, full SOAP envelopes with credentials)
- Over-log (avoid logging every single step in tight loops)
- Use string interpolation in log messages (use structured logging parameters)

### Exception Handling

####  DO:
- Use domain-specific exceptions from `Core.Exceptions` and `Core.System.Exceptions`:
  - `RequestValidationFailureException` for validation errors
  - `DownStreamApiFailureException` for downstream API failures
  - `BaseException` for general application errors
- Let `ExceptionHandlerMiddleware` handle exception normalization
- Include error properties when throwing exceptions:
```csharp
throw new RequestValidationFailureException() 
{ 
    ErrorProperties = [ErrorConstants.INVALID_REQ_PAYLOAD] 
};
```

####  DON'T:
- Catch and swallow exceptions without logging
- Return raw exception details to API clients
- Throw generic `Exception` or `SystemException`
- Catch exceptions you cannot handle meaningfully

---

